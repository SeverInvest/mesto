(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e){var r,n,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e){"Escape"===e.key&&o.close()},(r="_handleEscClose")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this._popup=document.querySelector(e)}var r,n;return r=t,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_visible")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_visible")}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup_visible")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=i(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},o.apply(this,arguments)}function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,r,i,s,l=(i=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(i);if(s){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=l.call(this,e))._popupPicture=document.querySelector(".popup__photo"),t._popupText=document.querySelector(".popup__photo-description"),t}return t=f,(r=[{key:"open",value:function(e){var t=e.name,r=e.link;o(u(f.prototype),"open",this).call(this),this._popupPicture.src=r,this._popupPicture.alt=t,this._popupText.textContent=t}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(t);const l={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:"error_visible",templateCardSelector:"#card",spanErrorSelector:".error",popupProfileSelector:".popup_type_profile",popupBigPhotoSelector:".popup_type_photo",popupCardSelector:".popup_type_card",popupCloseSelector:".popup__close",popupConfirmSelector:".popup_type_confirm",popupUpdateAvatar:".popup_type_upd-avatar",profileSelector:".traveler",profileButtonCorrectSelector:".traveler__button-correct",profileButtonUpdAvatarSelector:".traveler__change-avatar",inputProfileName:".form__input_type_name",inputProfileAbout:".form__input_type_about",buttonAddCardSelector:".traveler__button-add",listCardsSelector:".cards__list",profaleNameSelector:".traveler__name",profaleAboutSelector:".traveler__about",profaleAvatarSelector:".traveler__avatar"};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=d(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},h.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function _(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _(this,e)});function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=i.call(this,t))._handleSubmitClick=e,r._inputs={},r._inputList=Array.from(r._popup.querySelectorAll(l.inputSelector)),r._form=r._popup.querySelector(l.formSelector),r}return t=c,(r=[{key:"setEventListeners",value:function(){var e=this;h(v(c.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){e._handleSubmitClick(t,e._getInputValues())}))}},{key:"_getInputValues",value:function(){var e=this;return this._inputList.forEach((function(t){e._inputs[t.name]=t.value})),this._inputs}},{key:"close",value:function(){h(v(c.prototype),"close",this).call(this),this._form.reset()}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(t);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=k(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},S.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(n);if(o){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return w(this,e)});function c(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,r))._idCard=t,n._popupForm=n._popup.querySelector(l.formSelector),n._handleSubmitDeleteCard=e,n}return t=c,(r=[{key:"setEventListeners",value:function(){var e=this;S(C(c.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){e._handleSubmitDeleteCard(t,e._idCard)}))}}])&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(t);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=I(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},j.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function R(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(n);if(o){var r=A(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return R(this,e)});function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=i.call(this,t))._handleSubmitClick=e,r._input=r._popup.querySelector(l.inputSelector),r._form=r._popup.querySelector(l.formSelector),r}return t=c,(r=[{key:"setEventListeners",value:function(){var e=this;j(A(c.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){e._handleSubmitClick(t,e._getInputValue())}))}},{key:"_getInputValue",value:function(){return this._input.value}},{key:"close",value:function(){j(A(c.prototype),"close",this).call(this),this._form.reset()}}])&&L(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(t);function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var x=function(){function e(t,r){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderItems",value:function(e){var t=this;e.cards.forEach((function(e){t._renderer(e)}))}}])&&U(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var D=function(){function e(t,r,n,o,i,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._likes=t.likes,this._idOwner=t.owner._id,this._idCard=t._id,this._name=t.name,this._link=t.link,this._myId=c,this._handleCardClick=n,this._handleToggleLike=o,this._handleOpenPopupWithConfirm=i,this._templateCardSelector=r,this._cardElement=this._getTemplate(),this._photo=this._cardElement.querySelector(".card__photo"),this._heart=this._cardElement.querySelector(".card__heart"),this._count_likes=this._cardElement.querySelector(".card__count-likes"),this._description=this._cardElement.querySelector(".card__description"),this._remove_button=this._cardElement.querySelector(".card__remove-button")}var t,r;return t=e,(r=[{key:"_countLikes",value:function(){return Object.keys(this._likes).length}},{key:"_isMyLike",value:function(){var e=this;return 0!==this._likes.length&&this._likes.some((function(t){return t._id===e._myId}))}},{key:"_setLike",value:function(){this._isMyLike()?this._heart.classList.add("card__heart_active"):this._heart.classList.remove("card__heart_active"),this._count_likes.textContent=this._countLikes(this._likes)}},{key:"_getTemplate",value:function(){return document.querySelector(this._templateCardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_toggleLike",value:function(){var e=this;this._isMyLike(this._likes)?this._methodCardLike="DELETE":this._methodCardLike="PUT",this._handleToggleLike({idCard:this._idCard,methodCardLike:this._methodCardLike}).then((function(t){e._likes=t.likes,e._setLike()}))}},{key:"_removeCard",value:function(){this._handleOpenPopupWithConfirm(this)}},{key:"deleteCard",value:function(){this._cardElement.remove(),this._cardElement=null}},{key:"_setEventListeners",value:function(){var e=this;this._photo.addEventListener("click",(function(){e._handleCardClick({name:e._name,link:e._link})})),this._heart.addEventListener("click",(function(){return e._toggleLike()})),this._remove_button.addEventListener("click",(function(){return e._removeCard()}))}},{key:"createCard",value:function(){return this._description.textContent=this._name,this._photo.src=this._link,this._photo.alt=this._name,this._count_likes.textContent=this._countLikes(this._likes),this._setLike(this._likes),this._idOwner===this._myId&&this._remove_button.classList.add("card__remove-button_visible"),this._setEventListeners(),this._cardElement}}])&&B(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var N=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._params=t,this._formElement=r,this._errorList=r.querySelectorAll(t.spanErrorSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._params.inputSelector)),this._buttonElement=this._formElement.querySelector(this._params.submitButtonSelector)}var t,r;return t=e,(r=[{key:"_addClassError",value:function(e){e.classList.remove(this._params.inputErrorClass)}},{key:"_removeClassError",value:function(e){e.classList.remove(this._params.inputErrorClass)}},{key:"_addValidationErrors",value:function(e,t){e.classList.add(this._params.errorClass),e.textContent=t}},{key:"_removeValidationErrors",value:function(e){e.textContent="",e.classList.remove(this._params.errorClass)}},{key:"_showInputError",value:function(e,t){var r=this._formElement.querySelector("#".concat(e.id,"-error"));this._addClassError(e),this._addValidationErrors(r,t)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));this._removeClassError(e),this._removeValidationErrors(t)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._buttonElement.disabled=this._hasInvalidInput(),this._hasInvalidInput()?this._buttonElement.classList.add(this._params.inactiveButtonClass):this._buttonElement.classList.remove(this._params.inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"clearErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._removeClassError(t)})),this._toggleButtonState(),this._errorList.forEach((function(t){return e._removeValidationErrors(t)}))}}])&&V(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var J=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(t),this._profileAbout=document.querySelector(r),this._profileAvatar=document.querySelector(n),this._myId=""}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{profileName:this._profileName.textContent,profileAbout:this._profileAbout.textContent,myId:this._myId}}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about,n=e.myId,o=void 0===n?"":n;this._profileName.textContent=t,this._profileAbout.textContent=r,this._myId||(this._myId=o)}},{key:"renderAvatar",value:function(e){this._profileAvatar.src=e}},{key:"renderUserInfo",value:function(e){this.setUserInfo({name:e.name,about:e.about,myId:e.myId}),this.renderAvatar(e.avatar)}}])&&M(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connect=t}var t,r;return t=e,(r=[{key:"_onError",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"_isError",value:function(e){console.log(e)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._connect.baseUrl,"/cards"),{method:"GET",headers:this._connect.headers}).then(this._onError).catch(this._isError)}},{key:"getUser",value:function(){return fetch("".concat(this._connect.baseUrl,"/users/me"),{method:"GET",headers:this._connect.headers}).then(this._onError).catch(this._isError)}},{key:"renderUserAndCards",value:function(){return Promise.all([this.getUser(),this.getInitialCards()])}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._connect.baseUrl,"/users/me"),{method:"PATCH",headers:this._connect.headers,body:JSON.stringify(e)}).then(this._onError).catch(this._isError)}},{key:"setCard",value:function(e){return fetch("".concat(this._connect.baseUrl,"/cards"),{method:"POST",headers:this._connect.headers,body:JSON.stringify(e)}).then(this._onError).catch(this._isError)}},{key:"toggleLikeCard",value:function(e){var t=e.idCard,r=e.methodCardLike;return fetch("".concat(this._connect.baseUrl,"/cards/").concat(t,"/likes"),{method:r,headers:this._connect.headers}).then(this._onError).catch(this._isError)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._connect.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._connect.headers}).then(this._onError).catch(this._isError)}},{key:"setAvatar",value:function(e){return fetch("".concat(this._connect.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._connect.headers,body:JSON.stringify(e)}).then(this._onError).catch(this._isError)}}])&&F(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var H=new J(l.profaleNameSelector,l.profaleAboutSelector,l.profaleAvatarSelector),W=document.querySelector(l.listCardsSelector),z="",K=new x({renderer:function(e){K.addItem(ee(e))}},l.listCardsSelector),Q=new G({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-55",headers:{authorization:"79dea315-f51a-42c0-8f7a-17f645a07cb4","Content-Type":"application/json"}});Q.renderUserAndCards().then((function(e){H.renderUserInfo({name:e[0].name,about:e[0].about,myId:e[0]._id,avatar:e[0].avatar}),K.renderItems({cards:e[1]})}));var X=new T((function(e,t){return e.preventDefault(),he(fe,!0),Q.setAvatar({avatar:t}).then((function(e){var t=e.avatar;H.renderAvatar(t)})).then((function(){return X.close()})).finally((function(){return he(fe,!1)}))}),l.popupUpdateAvatar);X.setEventListeners();var Y=new s(l.popupBigPhotoSelector);function Z(e){var t=new O((function(r,n){return r.preventDefault(),Q.deleteCard(n).then((function(r){return t.close(),(r.message="Пост удалён")&&e.deleteCard(),r})).catch((function(){t.close()}))}),e._idCard,l.popupConfirmSelector);t.setEventListeners(),t.open()}function $(e){Y.open(e)}function ee(e){return new D(e,l.templateCardSelector,$,ne,Z,H.getUserInfo().myId).createCard()}Y.setEventListeners();var te=new b((function(e,t){e.preventDefault(),he(se,!0),Q.setCard(t).then((function(e){var t;t=ee(e),W.prepend(t)})).then((function(){return te.close()})).finally((function(){return he(se,!1)}))}),l.popupCardSelector);te.setEventListeners(),document.querySelector(l.buttonAddCardSelector).addEventListener("click",(function(){ye.clearErrors(),te.open()}));var re=new b((function(e,t){e.preventDefault(),he(oe,!0),Q.setUserInfo(t).then((function(e){H.setUserInfo(e)})).then((function(){return re.close()})).finally((function(){return he(oe,!1)}))}),l.popupProfileSelector);function ne(e){return Q.toggleLikeCard(e)}re.setEventListeners();var oe=document.querySelector(l.popupProfileSelector),ie=oe.querySelector(l.formSelector),ce=ie.querySelector(l.inputProfileName),ae=ie.querySelector(l.inputProfileAbout),ue=document.querySelector(l.profileSelector);ue.querySelector(l.profileButtonCorrectSelector).addEventListener("click",(function(){var e=H.getUserInfo();ce.value=e.profileName,ae.value=e.profileAbout,de.clearErrors(),re.open()})),ue.querySelector(l.profileButtonUpdAvatarSelector).addEventListener("click",(function(){X.open()}));var se=document.querySelector(l.popupCardSelector),le=se.querySelector(l.formSelector),fe=document.querySelector(l.popupUpdateAvatar),pe=fe.querySelector(l.formSelector);function he(e,t){var r=e.querySelector(l.submitButtonSelector);t?(z=r.textContent,r.textContent="Сохранение..."):(r.textContent=z,z="")}var de=new N(l,ie),ye=new N(l,le),_e=new N(l,pe);de.enableValidation(),ye.enableValidation(),_e.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWNuRHNLLEdBQVV4TixTQUFTQyxjQUFjaUQsRUFBQUEsaUJBQ2JzSyxHQUFRdk4sY0FBY2lELEVBQUFBLDhCQUM5QmhELGlCQUFpQixTQWRuQyxXQUNFLElBQU11TixFQUFjckMsRUFBU3VCLGNBQzdCeEssR0FBaUJvQixNQUFRa0ssRUFBWXBFLFlBQ3JDakgsR0FBa0JtQixNQUFRa0ssRUFBWW5FLGFBQ3RDb0UsR0FBb0JQLGNBQ3BCQyxHQUFpQlYsTUFDbkIsSUFTNEJjLEdBQVF2TixjQUFjaUQsRUFBQUEsZ0NBQzlCaEQsaUJBQWlCLFNBUnJDLFdBQ0U4TCxFQUFlVSxNQUNqQixJQVFBLElBQU1JLEdBQVk5TSxTQUFTQyxjQUFjaUQsRUFBQUEsbUJBQ25DeUssR0FBV2IsR0FBVTdNLGNBQWNpRCxFQUFBQSxjQUNuQ2dKLEdBQWNsTSxTQUFTQyxjQUFjaUQsRUFBQUEsbUJBQ3JDMEssR0FBcUIxQixHQUFZak0sY0FBY2lELEVBQUFBLGNBR3JELFNBQVMrSSxHQUFtQjRCLEVBQU9DLEdBQ2pDLElBQU1DLEVBQXdCRixFQUFNNU4sY0FBY2lELEVBQUFBLHNCQUM5QzRLLEdBQ0Z4QyxFQUF5QnlDLEVBQXNCOU0sWUFDL0M4TSxFQUFzQjlNLFlBQWMsa0JBRXBDOE0sRUFBc0I5TSxZQUFjcUssRUFDcENBLEVBQXlCLEdBRTdCLENBRUEsSUFBTW9DLEdBQXNCLElBQUlyRyxFQUFjbkUsRUFBUXFLLElBQ2hETCxHQUFtQixJQUFJN0YsRUFBY25FLEVBQVF5SyxJQUM3Q0ssR0FBcUIsSUFBSTNHLEVBQWNuRSxFQUFRMEssSUFDckRGLEdBQW9CTyxtQkFDcEJmLEdBQWlCZSxtQkFDakJELEdBQW1CQyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9wYXJhbXMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwVXBkQXZhdGFyLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29ubmVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfTtcblxuICBvcGVuKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfdmlzaWJsZScpO1xuICB9O1xuXG4gIGNsb3NlKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfdmlzaWJsZScpO1xuICB9O1xuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9O1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfdmlzaWJsZScpKSB8fCAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBQaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19waG90bycpO1xuICAgIHRoaXMuX3BvcHVwVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGhvdG8tZGVzY3JpcHRpb24nKTtcbiAgfTtcblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX3BvcHVwUGljdHVyZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwUGljdHVyZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwVGV4dC50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH07XG5cbn0iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IFBBUkFNUyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gICAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0JyxcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZm9ybV9fc3VibWl0X2Rpc2FibGVkJyxcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgICBlcnJvckNsYXNzOiAnZXJyb3JfdmlzaWJsZScsXG4gICAgdGVtcGxhdGVDYXJkU2VsZWN0b3I6ICcjY2FyZCcsXG4gICAgc3BhbkVycm9yU2VsZWN0b3I6ICcuZXJyb3InLFxuICAgIHBvcHVwUHJvZmlsZVNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfcHJvZmlsZScsXG4gICAgcG9wdXBCaWdQaG90b1NlbGVjdG9yOiAnLnBvcHVwX3R5cGVfcGhvdG8nLFxuICAgIHBvcHVwQ2FyZFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfY2FyZCcsXG4gICAgcG9wdXBDbG9zZVNlbGVjdG9yOiAnLnBvcHVwX19jbG9zZScsXG4gICAgcG9wdXBDb25maXJtU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9jb25maXJtJyxcbiAgICBwb3B1cFVwZGF0ZUF2YXRhcjogJy5wb3B1cF90eXBlX3VwZC1hdmF0YXInLFxuICAgIHByb2ZpbGVTZWxlY3RvcjogJy50cmF2ZWxlcicsXG4gICAgcHJvZmlsZUJ1dHRvbkNvcnJlY3RTZWxlY3RvcjogJy50cmF2ZWxlcl9fYnV0dG9uLWNvcnJlY3QnLFxuICAgIHByb2ZpbGVCdXR0b25VcGRBdmF0YXJTZWxlY3RvcjogJy50cmF2ZWxlcl9fY2hhbmdlLWF2YXRhcicsXG4gICAgaW5wdXRQcm9maWxlTmFtZTogJy5mb3JtX19pbnB1dF90eXBlX25hbWUnLFxuICAgIGlucHV0UHJvZmlsZUFib3V0OiAnLmZvcm1fX2lucHV0X3R5cGVfYWJvdXQnLFxuICAgIGJ1dHRvbkFkZENhcmRTZWxlY3RvcjogJy50cmF2ZWxlcl9fYnV0dG9uLWFkZCcsXG4gICAgbGlzdENhcmRzU2VsZWN0b3I6ICcuY2FyZHNfX2xpc3QnLFxuICAgIHByb2ZhbGVOYW1lU2VsZWN0b3I6ICcudHJhdmVsZXJfX25hbWUnLFxuICAgIHByb2ZhbGVBYm91dFNlbGVjdG9yOiAnLnRyYXZlbGVyX19hYm91dCcsXG4gICAgcHJvZmFsZUF2YXRhclNlbGVjdG9yOiAnLnRyYXZlbGVyX19hdmF0YXInXG4gIH07XG4gIGV4cG9ydCBkZWZhdWx0IFBBUkFNUzsiLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcbmltcG9ydCBQQVJBTVMgZnJvbSAnLi4vdXRpbHMvcGFyYW1zLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoaGFuZGxlU3VibWl0Q2xpY2ssIHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRDbGljayA9IGhhbmRsZVN1Ym1pdENsaWNrO1xuICAgIHRoaXMuX2lucHV0cyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChQQVJBTVMuaW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFBBUkFNUy5mb3JtU2VsZWN0b3IpO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Q2xpY2soZXZ0LCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfTtcblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0XG4gICAgICAuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgdGhpcy5faW5wdXRzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzO1xuICB9O1xuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9O1xuXG59OyIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuaW1wb3J0IFBBUkFNUyBmcm9tICcuLi91dGlscy9wYXJhbXMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKGhhbmRsZVN1Ym1pdERlbGV0ZUNhcmQsIGlkQ2FyZCwgcG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faWRDYXJkID0gaWRDYXJkO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFBBUkFNUy5mb3JtU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXREZWxldGVDYXJkID0gaGFuZGxlU3VibWl0RGVsZXRlQ2FyZDtcbiAgICAgICAgLy90aGlzLl9wb3B1cEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc3VibWl0Jyk7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwi0JTQviDRgdGO0LTQsCDRgNCw0LHQvtGC0LDQtdGCXCIpXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXREZWxldGVDYXJkKGV2dCwgdGhpcy5faWRDYXJkKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcbmltcG9ydCBQQVJBTVMgZnJvbSAnLi4vdXRpbHMvcGFyYW1zLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBVcGRBdmF0YXIgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKGhhbmRsZVN1Ym1pdENsaWNrLCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0Q2xpY2sgPSBoYW5kbGVTdWJtaXRDbGljaztcbiAgICB0aGlzLl9pbnB1dCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoUEFSQU1TLmlucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFBBUkFNUy5mb3JtU2VsZWN0b3IpO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Q2xpY2soZXZ0LCB0aGlzLl9nZXRJbnB1dFZhbHVlKCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9nZXRJbnB1dFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dC52YWx1ZTtcbiAgfTtcblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfTtcblxufTsiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgLy90aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH07XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfTtcblxuICByZW5kZXJJdGVtcyhvYmplY3RzKSB7XG4gICAgLy9jb25zb2xlLmxvZyhvYmplY3RzKTtcbiAgICBvYmplY3RzLmNhcmRzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgb2JqQ2FyZCxcbiAgICB0ZW1wbGF0ZUNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlVG9nZ2xlTGlrZSxcbiAgICBoYW5kbGVPcGVuUG9wdXBXaXRoQ29uZmlybSxcbiAgICBteUlkKSB7XG4gICAgdGhpcy5fbGlrZXMgPSBvYmpDYXJkLmxpa2VzOyAvL9C80LDRgdGB0LjQsiDQvtCx0YrQtdC60YLQvtCyINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5LCDQv9C+0YHRgtCw0LLQuNCy0YjQuNGFINC70LDQudC6XG4gICAgdGhpcy5faWRPd25lciA9IG9iakNhcmQub3duZXIuX2lkOyAvL2lkINGB0L7QsdGB0YLQstC10L3QvdC40LrQsCDRhNC+0YLQvlxuICAgIHRoaXMuX2lkQ2FyZCA9IG9iakNhcmQuX2lkOy8vIGlkINC60LDRgNGC0L7Rh9C60LhcbiAgICB0aGlzLl9uYW1lID0gb2JqQ2FyZC5uYW1lOy8vINC90LDQuNC80LXQvdC+0LLQsNC90LjQtSDRhNC+0YLQvlxuICAgIHRoaXMuX2xpbmsgPSBvYmpDYXJkLmxpbms7Ly/RgdGB0YvQu9C60LAg0L3QsCDRhNC+0YLQvlxuICAgIHRoaXMuX215SWQgPSBteUlkOyAvL9C80L7QuSBpZFxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVUb2dnbGVMaWtlID0gaGFuZGxlVG9nZ2xlTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVPcGVuUG9wdXBXaXRoQ29uZmlybSA9IGhhbmRsZU9wZW5Qb3B1cFdpdGhDb25maXJtO1xuICAgIHRoaXMuX3RlbXBsYXRlQ2FyZFNlbGVjdG9yID0gdGVtcGxhdGVDYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3Bob3RvID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3Bob3RvJyk7XG4gICAgdGhpcy5faGVhcnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhcnQnKTtcbiAgICB0aGlzLl9jb3VudF9saWtlcyA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19jb3VudC1saWtlcycpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2Rlc2NyaXB0aW9uJyk7XG4gICAgdGhpcy5fcmVtb3ZlX2J1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19yZW1vdmUtYnV0dG9uJyk7XG4gIH07XG5cbiAgX2NvdW50TGlrZXMoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2xpa2VzKS5sZW5ndGg7XG4gIH07XG5cbiAgX2lzTXlMaWtlKCkge1xuICAgIGlmICh0aGlzLl9saWtlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoaXRlbSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fbXlJZClcbiAgfTtcblxuICBfc2V0TGlrZSgpIHtcblxuICAgIGlmICh0aGlzLl9pc015TGlrZSgpKSB7XG4gICAgICB0aGlzLl9oZWFydC5jbGFzc0xpc3QuYWRkKCdjYXJkX19oZWFydF9hY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGVhcnQuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9faGVhcnRfYWN0aXZlJyk7XG4gICAgfVxuICAgIHRoaXMuX2NvdW50X2xpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fY291bnRMaWtlcyh0aGlzLl9saWtlcyk7XG4gIH07XG5cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVDYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9O1xuXG4gIF90b2dnbGVMaWtlKCkge1xuICAgIGlmICghdGhpcy5faXNNeUxpa2UodGhpcy5fbGlrZXMpKSB7XG4gICAgICB0aGlzLl9tZXRob2RDYXJkTGlrZSA9IFwiUFVUXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX21ldGhvZENhcmRMaWtlID0gXCJERUxFVEVcIjtcbiAgICB9XG4gICAgdGhpcy5faGFuZGxlVG9nZ2xlTGlrZSh7XG4gICAgICBpZENhcmQ6IHRoaXMuX2lkQ2FyZCxcbiAgICAgIG1ldGhvZENhcmRMaWtlOiB0aGlzLl9tZXRob2RDYXJkTGlrZSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gcmVzcG9uc2UubGlrZXNcbiAgICAgICAgdGhpcy5fc2V0TGlrZSgpO1xuICAgICAgfSlcbiAgfTtcblxuICBfcmVtb3ZlQ2FyZCgpIHtcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZU9wZW5Qb3B1cFdpdGhDb25maXJtKHRoaXMpXG4gIH07XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiBcbiAgfVxuXG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3Bob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgJ25hbWUnOiB0aGlzLl9uYW1lLCAnbGluayc6IHRoaXMuX2xpbmsgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5faGVhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl90b2dnbGVMaWtlKCkpO1xuICAgIHRoaXMuX3JlbW92ZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9yZW1vdmVDYXJkKCkpO1xuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fcGhvdG8uc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9waG90by5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NvdW50X2xpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fY291bnRMaWtlcyh0aGlzLl9saWtlcyk7XG4gICAgdGhpcy5fc2V0TGlrZSh0aGlzLl9saWtlcyk7XG4gICAgaWYgKHRoaXMuX2lkT3duZXIgPT09IHRoaXMuX215SWQpIHtcbiAgICAgIHRoaXMuX3JlbW92ZV9idXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fcmVtb3ZlLWJ1dHRvbl92aXNpYmxlJyk7XG4gICAgfVxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbiAgLypcbiAgICBnZXRDb3VudExpa2VzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2xpa2VzO1xuICAgIH1cbiAgKi9cbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IocGFyYW1zLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3BhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2Vycm9yTGlzdCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocGFyYW1zLnNwYW5FcnJvclNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fcGFyYW1zLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wYXJhbXMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9O1xuXG4gIF9hZGRDbGFzc0Vycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BhcmFtcy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9yZW1vdmVDbGFzc0Vycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BhcmFtcy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9hZGRWYWxpZGF0aW9uRXJyb3JzKGVycm9yRWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fcGFyYW1zLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfTtcblxuICBfcmVtb3ZlVmFsaWRhdGlvbkVycm9ycyhlcnJvckVsZW1lbnQpIHtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJ1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BhcmFtcy5lcnJvckNsYXNzKTtcbiAgfTtcblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgdGhpcy5fYWRkQ2xhc3NFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIHRoaXMuX2FkZFZhbGlkYXRpb25FcnJvcnMoZXJyb3JFbGVtZW50LCBlcnJvck1lc3NhZ2UpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgdGhpcy5fcmVtb3ZlQ2xhc3NFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIHRoaXMuX3JlbW92ZVZhbGlkYXRpb25FcnJvcnMoZXJyb3JFbGVtZW50KTtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdGhpcy5faGFzSW52YWxpZElucHV0KCk7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fcGFyYW1zLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcGFyYW1zLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIGNsZWFyRXJyb3JzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzRXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpXG4gICAgdGhpcy5fZXJyb3JMaXN0LmZvckVhY2goKGVycm9yRWxlbWVudCkgPT4gdGhpcy5fcmVtb3ZlVmFsaWRhdGlvbkVycm9ycyhlcnJvckVsZW1lbnQpKTtcbiAgfTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IocHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZUFib3V0U2VsZWN0b3IsIHByb2ZpbGVBdmF0YXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBYm91dFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyU2VsZWN0b3IpO1xuICAgIHRoaXMuX215SWQgPSBcIlwiO1xuICB9O1xuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIC8vY29uc29sZS5sb2coYG15SWQ6ICR7dGhpcy5fbXlJZH1gKTtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvZmlsZU5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgcHJvZmlsZUFib3V0OiB0aGlzLl9wcm9maWxlQWJvdXQudGV4dENvbnRlbnQsXG4gICAgICBteUlkOiB0aGlzLl9teUlkLFxuICAgIH07XG4gIH07XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgbXlJZCA9IFwiXCIgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICBpZiAoIXRoaXMuX215SWQpIHsgdGhpcy5fbXlJZCA9IG15SWQgfTtcbiAgfTtcblxuICByZW5kZXJBdmF0YXIobGluaykge1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gbGlua1xuICB9XG5cbiAgcmVuZGVyVXNlckluZm8oaW5mbykge1xuICAgIHRoaXMuc2V0VXNlckluZm8oeyBuYW1lOiBpbmZvLm5hbWUsIGFib3V0OiBpbmZvLmFib3V0LCBteUlkOiBpbmZvLm15SWQgfSk7XG4gICAgdGhpcy5yZW5kZXJBdmF0YXIoaW5mby5hdmF0YXIpO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcihjb25uZWN0KSB7XG4gICAgdGhpcy5fY29ubmVjdCA9IGNvbm5lY3Q7XG4gIH1cblxuICBfb25FcnJvcihyZXN1bHQpIHtcbiAgICBpZiAocmVzdWx0Lm9rKSB7XG4gICAgICByZXR1cm4gcmVzdWx0Lmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzdWx0LnN0YXR1c31gKTtcbiAgfVxuXG4gIF9pc0Vycm9yKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9jb25uZWN0LmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5fY29ubmVjdC5oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX29uRXJyb3IpXG4gICAgICAuY2F0Y2godGhpcy5faXNFcnJvcilcblxuICB9XG5cbiAgZ2V0VXNlcigpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fY29ubmVjdC5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Nvbm5lY3QuaGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9vbkVycm9yKVxuICAgICAgLmNhdGNoKHRoaXMuX2lzRXJyb3IpXG4gIH1cblxuICByZW5kZXJVc2VyQW5kQ2FyZHMoKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXIoKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pXG4gIH1cblxuICBzZXRVc2VySW5mbyhpbmZvKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Nvbm5lY3QuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9jb25uZWN0LmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShpbmZvKVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9vbkVycm9yKVxuICAgICAgLmNhdGNoKHRoaXMuX2lzRXJyb3IpXG4gIH1cblxuICBzZXRDYXJkKGluZm8pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fY29ubmVjdC5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9jb25uZWN0LmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShpbmZvKVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9vbkVycm9yKVxuICAgICAgLmNhdGNoKHRoaXMuX2lzRXJyb3IpXG4gIH1cblxuICB0b2dnbGVMaWtlQ2FyZCh7IGlkQ2FyZCwgbWV0aG9kQ2FyZExpa2UgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9jb25uZWN0LmJhc2VVcmx9L2NhcmRzLyR7aWRDYXJkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kQ2FyZExpa2UsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9jb25uZWN0LmhlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fb25FcnJvcilcbiAgICAgIC5jYXRjaCh0aGlzLl9pc0Vycm9yKVxuXG4gIH1cblxuICBkZWxldGVDYXJkKGlkQ2FyZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9jb25uZWN0LmJhc2VVcmx9L2NhcmRzLyR7aWRDYXJkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Nvbm5lY3QuaGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9vbkVycm9yKVxuICAgICAgLmNhdGNoKHRoaXMuX2lzRXJyb3IpXG4gIH1cblxuICBzZXRBdmF0YXIoaW5mbykge1xuICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGluZm8pKTtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fY29ubmVjdC5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2Nvbm5lY3QuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGluZm8pXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX29uRXJyb3IpXG4gICAgICAuY2F0Y2godGhpcy5faXNFcnJvcilcbiAgfVxufVxuXG5cblxuXG5cbmV4cG9ydCBkZWZhdWx0IEFwaTsiLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMnO1xuaW1wb3J0IFBvcHVwVXBkQXZhdGFyIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBVcGRBdmF0YXIuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBQQVJBTVMgZnJvbSAnLi4vdXRpbHMvcGFyYW1zLmpzJztcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgY29ubmVjdCBmcm9tIFwiLi4vdXRpbHMvY29ubmVjdC5qc1wiO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgUEFSQU1TLnByb2ZhbGVOYW1lU2VsZWN0b3IsIFxuICBQQVJBTVMucHJvZmFsZUFib3V0U2VsZWN0b3IsIFxuICBQQVJBTVMucHJvZmFsZUF2YXRhclNlbGVjdG9yKTtcblxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQQVJBTVMubGlzdENhcmRzU2VsZWN0b3IpO1xuXG5sZXQgdGVtcFRvZ2dsZUJ1dHRvblN1Ym1pdCA9IFwiXCJcblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiBkYXRhID0+IHtcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZU5ld0NhcmQoZGF0YSkpO1xuICB9XG59LFxuICBQQVJBTVMubGlzdENhcmRzU2VsZWN0b3Jcbik7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoY29ubmVjdCk7XG5hcGkucmVuZGVyVXNlckFuZENhcmRzKClcbiAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICB1c2VySW5mby5yZW5kZXJVc2VySW5mbyh7XG4gICAgICBuYW1lOiBkYXRhWzBdLm5hbWUsXG4gICAgICBhYm91dDogZGF0YVswXS5hYm91dCxcbiAgICAgIG15SWQ6IGRhdGFbMF0uX2lkLFxuICAgICAgYXZhdGFyOiBkYXRhWzBdLmF2YXRhclxuICAgIH0pO1xuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKHtcbiAgICAgIGNhcmRzOiBkYXRhWzFdXG4gICAgfSk7XG4gIH0pXG5cbi8v0KHQvtC30LTQsNC10Lwg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCDQv9C+0L/QsNC/0LAg0LjQt9C80LXQvdC10L3QuNGPINCw0LLQsNGC0LDRgNCwXG5jb25zdCBwb3B1cFVwZEF2YXRhciA9IG5ldyBQb3B1cFVwZEF2YXRhcihoYW5kbGVTdWJtaXRDbGljaywgUEFSQU1TLnBvcHVwVXBkYXRlQXZhdGFyKTtcbnBvcHVwVXBkQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdENsaWNrKGV2dCwgbGluaykge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgdG9nZ2xlQnV0dG9uU3VibWl0KGF2YXRhclBvcHVwLCB0cnVlKVxuICByZXR1cm4gYXBpLnNldEF2YXRhcih7IFwiYXZhdGFyXCI6IGxpbmsgfSlcbiAgICAudGhlbigoeyBhdmF0YXIgfSkgPT4ge1xuICAgICAgdXNlckluZm8ucmVuZGVyQXZhdGFyKGF2YXRhcilcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHBvcHVwVXBkQXZhdGFyLmNsb3NlKCkpXG4gICAgLmZpbmFsbHkoKCkgPT4gdG9nZ2xlQnV0dG9uU3VibWl0KGF2YXRhclBvcHVwLCBmYWxzZSkpXG59XG5cbi8vINCh0L7Qt9C00LDRkdC8INGN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAg0L/QvtC/0LDQv9CwINC90LAg0L/QvtC70L3Ri9C5INGN0LrRgNCw0L1cbmNvbnN0IHBvcHVwRnVsbFNjcmVlbiA9IG5ldyBQb3B1cFdpdGhJbWFnZShQQVJBTVMucG9wdXBCaWdQaG90b1NlbGVjdG9yKTtcbnBvcHVwRnVsbFNjcmVlbi5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVPcGVuUG9wdXBXaXRoQ29uZmlybShvYmpDYXJkKSB7XG4gIGNvbnN0IGhhbmRsZVN1Ym1pdERlbGV0ZUNhcmQgPSAoZXZ0LCBpZENhcmQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICByZXR1cm4gYXBpLmRlbGV0ZUNhcmQoaWRDYXJkKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHBvcHVwQ29uZmlybURlbGV0ZUNhcmQuY2xvc2UoKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm1lc3NhZ2UgPSBcItCf0L7RgdGCINGD0LTQsNC70ZHQvVwiKSB7XG4gICAgICAgICAgb2JqQ2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIHBvcHVwQ29uZmlybURlbGV0ZUNhcmQuY2xvc2UoKTtcbiAgICAgIH0pXG4gIH1cbiAgY29uc3QgcG9wdXBDb25maXJtRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKFxuICAgIGhhbmRsZVN1Ym1pdERlbGV0ZUNhcmQsXG4gICAgb2JqQ2FyZC5faWRDYXJkLFxuICAgIFBBUkFNUy5wb3B1cENvbmZpcm1TZWxlY3RvclxuICApO1xuICBwb3B1cENvbmZpcm1EZWxldGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIHBvcHVwQ29uZmlybURlbGV0ZUNhcmQub3BlbigpO1xufVxuXG4vLyDQntCx0YrRj9Cy0LvRj9C10Lwg0YTRg9C90LrRhtC40Y4sINC60L7RgtC+0YDQsNGPINC30LDQv9C40YHRi9Cy0LDQtdGCINC30L3QsNGH0LXQvdC40Y8g0LIg0Y3Qu9C10LzQtdC90YLRiyDQv9C+0L/QsNC/0LAgXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2soZGF0YSkgeyBwb3B1cEZ1bGxTY3JlZW4ub3BlbihkYXRhKSB9O1xuXG4vLyDRhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuZnVuY3Rpb24gY3JlYXRlTmV3Q2FyZChkYXRhKSB7XG4gIHJldHVybiBuZXcgQ2FyZChcbiAgICBkYXRhLFxuICAgIFBBUkFNUy50ZW1wbGF0ZUNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlVG9nZ2xlTGlrZSxcbiAgICBoYW5kbGVPcGVuUG9wdXBXaXRoQ29uZmlybSxcbiAgICB1c2VySW5mby5nZXRVc2VySW5mbygpLm15SWRcbiAgKVxuICAgIC5jcmVhdGVDYXJkKCk7XG59O1xuLy8g0YTRg9C90LrRhtC40Y8g0LTQvtCx0LDQstC70Y/QtdGCINC60LDRgNGC0L7Rh9C60YMg0LIg0LzQsNGB0YHQuNCyIFxuZnVuY3Rpb24gYWRkQ2FyZChjYXJkKSB7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmQpO1xufVxuXG4vLyDQodC+0LfQtNCw0ZHQvCDRjdC60LfQtdC80L/Qu9GP0YAg0LrQu9Cw0YHRgdCwINC/0L7Qv9Cw0L/QsCDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LXQulxuY29uc3QgcG9wdXBBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oaGFuZGxlU3VibWl0Q2FyZCwgUEFSQU1TLnBvcHVwQ2FyZFNlbGVjdG9yKTtcblxuLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8gc3VibWl0INGE0L7RgNC80Ysg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCBcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdENhcmQoZXZ0LCBkYXRhKSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICB0b2dnbGVCdXR0b25TdWJtaXQoY2FyZFBvcHVwLCB0cnVlKVxuICBhcGkuc2V0Q2FyZChkYXRhKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBhZGRDYXJkKGNyZWF0ZU5ld0NhcmQoZGF0YSkpO1xuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4gcG9wdXBBZGRDYXJkLmNsb3NlKCkpXG4gICAgLmZpbmFsbHkoKCkgPT4gdG9nZ2xlQnV0dG9uU3VibWl0KGNhcmRQb3B1cCwgZmFsc2UpKVxufTtcblxucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIG9wZW5Qb3B1cENhcmQoKSB7XG4gIC8vY2FyZEZvcm0ucmVzZXQoKTtcbiAgZm9ybVZhbGlkYXRlQ2FyZC5jbGVhckVycm9ycygpO1xuICBwb3B1cEFkZENhcmQub3BlbigpO1xufTtcblxuLy8g0KHQvtC30LTQsNC90LjQtSDRgdC70YPRiNCw0YLQtdC70Y8g0L3QsCDQutC90L7Qv9C60Lgg0L7RgtC60YDRi9GC0LjRjyDQuCDRgdC+0YXRgNCw0L3QtdC90LjRjyDQv9C+0L/QsNC/0LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgYnV0dG9uT3BlbkFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFBBUkFNUy5idXR0b25BZGRDYXJkU2VsZWN0b3IpO1xuYnV0dG9uT3BlbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBDYXJkKTtcblxuLy8g0KHQvtC30LTQsNGR0Lwg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCDQv9C+0L/QsNC/0LAg0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShoYW5kbGVTdWJtaXRQcm9maWxlLCBQQVJBTVMucG9wdXBQcm9maWxlU2VsZWN0b3IpO1xuXG4vLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBzdWJtaXQg0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3RjyDQv9GA0L7RhNC40LvRj1xuZnVuY3Rpb24gaGFuZGxlU3VibWl0UHJvZmlsZShldnQsIGRhdGEpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHRvZ2dsZUJ1dHRvblN1Ym1pdChwb3B1cFByb2ZpbGUsIHRydWUpXG4gIGFwaS5zZXRVc2VySW5mbyhkYXRhKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKVxuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4gcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpKVxuICAgIC5maW5hbGx5KCgpID0+IHRvZ2dsZUJ1dHRvblN1Ym1pdChwb3B1cFByb2ZpbGUsIGZhbHNlKSlcbn07XG5cbmZ1bmN0aW9uIGhhbmRsZVRvZ2dsZUxpa2UoZGF0YSkge1xuICByZXR1cm4gYXBpLnRvZ2dsZUxpa2VDYXJkKGRhdGEpXG59O1xuXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUEFSQU1TLnBvcHVwUHJvZmlsZVNlbGVjdG9yKTtcbmNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcihQQVJBTVMuZm9ybVNlbGVjdG9yKTtcblxuY29uc3QgaW5wdXRQcm9maWxlTmFtZSA9IHBvcHVwUHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihQQVJBTVMuaW5wdXRQcm9maWxlTmFtZSk7XG5jb25zdCBpbnB1dFByb2ZpbGVBYm91dCA9IHBvcHVwUHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihQQVJBTVMuaW5wdXRQcm9maWxlQWJvdXQpO1xuXG5mdW5jdGlvbiBvcGVuUG9wdXBQcm9maWxlKCkge1xuICBjb25zdCBwcm9maWxlSW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0UHJvZmlsZU5hbWUudmFsdWUgPSBwcm9maWxlSW5mby5wcm9maWxlTmFtZTtcbiAgaW5wdXRQcm9maWxlQWJvdXQudmFsdWUgPSBwcm9maWxlSW5mby5wcm9maWxlQWJvdXQ7XG4gIGZvcm1WYWxpZGF0ZVByb2ZpbGUuY2xlYXJFcnJvcnMoKTtcbiAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XG59O1xuXG5mdW5jdGlvbiBvcGVuUG9wdXBBZGRBdmF0YXIoKSB7XG4gIHBvcHVwVXBkQXZhdGFyLm9wZW4oKTtcbn1cblxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUEFSQU1TLnByb2ZpbGVTZWxlY3Rvcik7XG5jb25zdCBidXR0b25PcGVuUHJvZmlsZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihQQVJBTVMucHJvZmlsZUJ1dHRvbkNvcnJlY3RTZWxlY3Rvcik7XG5idXR0b25PcGVuUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qb3B1cFByb2ZpbGUpO1xuY29uc3QgYnV0dG9uT3BlblVwZEF2YXRhciA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihQQVJBTVMucHJvZmlsZUJ1dHRvblVwZEF2YXRhclNlbGVjdG9yKTtcbmJ1dHRvbk9wZW5VcGRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBBZGRBdmF0YXIpO1xuXG5jb25zdCBjYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFBBUkFNUy5wb3B1cENhcmRTZWxlY3Rvcik7XG5jb25zdCBjYXJkRm9ybSA9IGNhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKFBBUkFNUy5mb3JtU2VsZWN0b3IpO1xuY29uc3QgYXZhdGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFBBUkFNUy5wb3B1cFVwZGF0ZUF2YXRhcik7XG5jb25zdCBwb3B1cFVwZEF2YXRhckZvcm0gPSBhdmF0YXJQb3B1cC5xdWVyeVNlbGVjdG9yKFBBUkFNUy5mb3JtU2VsZWN0b3IpO1xuXG5cbmZ1bmN0aW9uIHRvZ2dsZUJ1dHRvblN1Ym1pdChwb3B1cCwgaXNQcm9jZXNzKSB7XG4gIGNvbnN0IGJ1dHRvblN1Ym1pdFVwZEF2YXRhciA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoUEFSQU1TLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgaWYgKGlzUHJvY2Vzcykge1xuICAgIHRlbXBUb2dnbGVCdXR0b25TdWJtaXQgPSBidXR0b25TdWJtaXRVcGRBdmF0YXIudGV4dENvbnRlbnRcbiAgICBidXR0b25TdWJtaXRVcGRBdmF0YXIudGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uU3VibWl0VXBkQXZhdGFyLnRleHRDb250ZW50ID0gdGVtcFRvZ2dsZUJ1dHRvblN1Ym1pdDtcbiAgICB0ZW1wVG9nZ2xlQnV0dG9uU3VibWl0ID0gXCJcIjtcbiAgfVxufVxuXG5jb25zdCBmb3JtVmFsaWRhdGVQcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IoUEFSQU1TLCBwb3B1cFByb2ZpbGVGb3JtKTtcbmNvbnN0IGZvcm1WYWxpZGF0ZUNhcmQgPSBuZXcgRm9ybVZhbGlkYXRvcihQQVJBTVMsIGNhcmRGb3JtKTtcbmNvbnN0IGZvcm1WYWxpZGF0ZUF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKFBBUkFNUywgcG9wdXBVcGRBdmF0YXJGb3JtKVxuZm9ybVZhbGlkYXRlUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtVmFsaWRhdGVDYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcbmZvcm1WYWxpZGF0ZUF2YXRhci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iLCJjb25zdCBjb25uZWN0ID0ge1xuICAgIFwiYmFzZVVybFwiOlxuICAgICAgICBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNTVcIixcbiAgICBcImhlYWRlcnNcIjoge1xuICAgICAgICBcImF1dGhvcml6YXRpb25cIjogXCI3OWRlYTMxNS1mNTFhLTQyYzAtOGY3YS0xN2Y2NDVhMDdjYjRcIixcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdDsiXSwibmFtZXMiOlsiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJ0aGlzIiwiX3BvcHVwIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVFc2NDbG9zZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwUGljdHVyZSIsIl9wb3B1cFRleHQiLCJuYW1lIiwibGluayIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ0ZW1wbGF0ZUNhcmRTZWxlY3RvciIsInNwYW5FcnJvclNlbGVjdG9yIiwicG9wdXBQcm9maWxlU2VsZWN0b3IiLCJwb3B1cEJpZ1Bob3RvU2VsZWN0b3IiLCJwb3B1cENhcmRTZWxlY3RvciIsInBvcHVwQ2xvc2VTZWxlY3RvciIsInBvcHVwQ29uZmlybVNlbGVjdG9yIiwicG9wdXBVcGRhdGVBdmF0YXIiLCJwcm9maWxlU2VsZWN0b3IiLCJwcm9maWxlQnV0dG9uQ29ycmVjdFNlbGVjdG9yIiwicHJvZmlsZUJ1dHRvblVwZEF2YXRhclNlbGVjdG9yIiwiaW5wdXRQcm9maWxlTmFtZSIsImlucHV0UHJvZmlsZUFib3V0IiwiYnV0dG9uQWRkQ2FyZFNlbGVjdG9yIiwibGlzdENhcmRzU2VsZWN0b3IiLCJwcm9mYWxlTmFtZVNlbGVjdG9yIiwicHJvZmFsZUFib3V0U2VsZWN0b3IiLCJwcm9mYWxlQXZhdGFyU2VsZWN0b3IiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Q2xpY2siLCJfaGFuZGxlU3VibWl0Q2xpY2siLCJfaW5wdXRzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJQQVJBTVMiLCJfZm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJQb3B1cFdpdGhDb25maXJtIiwiaGFuZGxlU3VibWl0RGVsZXRlQ2FyZCIsImlkQ2FyZCIsIl9pZENhcmQiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZVN1Ym1pdERlbGV0ZUNhcmQiLCJQb3B1cFVwZEF2YXRhciIsIl9pbnB1dCIsIl9nZXRJbnB1dFZhbHVlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsImFwcGVuZCIsIm9iamVjdHMiLCJjYXJkcyIsIml0ZW0iLCJDYXJkIiwib2JqQ2FyZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVRvZ2dsZUxpa2UiLCJoYW5kbGVPcGVuUG9wdXBXaXRoQ29uZmlybSIsIm15SWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9pZE93bmVyIiwib3duZXIiLCJfaWQiLCJfbmFtZSIsIl9saW5rIiwiX215SWQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVRvZ2dsZUxpa2UiLCJfaGFuZGxlT3BlblBvcHVwV2l0aENvbmZpcm0iLCJfdGVtcGxhdGVDYXJkU2VsZWN0b3IiLCJfY2FyZEVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfcGhvdG8iLCJfaGVhcnQiLCJfY291bnRfbGlrZXMiLCJfZGVzY3JpcHRpb24iLCJfcmVtb3ZlX2J1dHRvbiIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJzb21lIiwiX2lzTXlMaWtlIiwiX2NvdW50TGlrZXMiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX21ldGhvZENhcmRMaWtlIiwibWV0aG9kQ2FyZExpa2UiLCJ0aGVuIiwicmVzcG9uc2UiLCJfc2V0TGlrZSIsIl90b2dnbGVMaWtlIiwiX3JlbW92ZUNhcmQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwicGFyYW1zIiwiZm9ybUVsZW1lbnQiLCJfcGFyYW1zIiwiX2Zvcm1FbGVtZW50IiwiX2Vycm9yTGlzdCIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiaWQiLCJfYWRkQ2xhc3NFcnJvciIsIl9hZGRWYWxpZGF0aW9uRXJyb3JzIiwiX3JlbW92ZUNsYXNzRXJyb3IiLCJfcmVtb3ZlVmFsaWRhdGlvbkVycm9ycyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImRpc2FibGVkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJwcmV2ZW50RGVmYXVsdCIsIlVzZXJJbmZvIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVBYm91dFNlbGVjdG9yIiwicHJvZmlsZUF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVBYm91dCIsIl9wcm9maWxlQXZhdGFyIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlQWJvdXQiLCJhYm91dCIsImluZm8iLCJzZXRVc2VySW5mbyIsInJlbmRlckF2YXRhciIsImF2YXRhciIsImNvbm5lY3QiLCJfY29ubmVjdCIsInJlc3VsdCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJmZXRjaCIsImJhc2VVcmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiX29uRXJyb3IiLCJjYXRjaCIsIl9pc0Vycm9yIiwiYWxsIiwiZ2V0VXNlciIsImdldEluaXRpYWxDYXJkcyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXNlckluZm8iLCJjYXJkc0xpc3QiLCJ0ZW1wVG9nZ2xlQnV0dG9uU3VibWl0IiwiY2FyZExpc3QiLCJkYXRhIiwiYWRkSXRlbSIsImNyZWF0ZU5ld0NhcmQiLCJhcGkiLCJBcGkiLCJyZW5kZXJVc2VyQW5kQ2FyZHMiLCJyZW5kZXJVc2VySW5mbyIsInJlbmRlckl0ZW1zIiwicG9wdXBVcGRBdmF0YXIiLCJ0b2dnbGVCdXR0b25TdWJtaXQiLCJhdmF0YXJQb3B1cCIsInNldEF2YXRhciIsImZpbmFsbHkiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwRnVsbFNjcmVlbiIsInBvcHVwQ29uZmlybURlbGV0ZUNhcmQiLCJkZWxldGVDYXJkIiwibWVzc2FnZSIsIm9wZW4iLCJnZXRVc2VySW5mbyIsImNyZWF0ZUNhcmQiLCJwb3B1cEFkZENhcmQiLCJjYXJkUG9wdXAiLCJzZXRDYXJkIiwiY2FyZCIsInByZXBlbmQiLCJmb3JtVmFsaWRhdGVDYXJkIiwiY2xlYXJFcnJvcnMiLCJwb3B1cEVkaXRQcm9maWxlIiwicG9wdXBQcm9maWxlIiwidG9nZ2xlTGlrZUNhcmQiLCJwb3B1cFByb2ZpbGVGb3JtIiwicHJvZmlsZSIsInByb2ZpbGVJbmZvIiwiZm9ybVZhbGlkYXRlUHJvZmlsZSIsImNhcmRGb3JtIiwicG9wdXBVcGRBdmF0YXJGb3JtIiwicG9wdXAiLCJpc1Byb2Nlc3MiLCJidXR0b25TdWJtaXRVcGRBdmF0YXIiLCJmb3JtVmFsaWRhdGVBdmF0YXIiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==